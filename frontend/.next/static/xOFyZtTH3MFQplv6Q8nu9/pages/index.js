(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{RNiq:function(e,t,n){"use strict";n.r(t);var c=n("ln6h"),a=n.n(c),r=n("O40h"),i=n("q1tI"),u=n.n(i),l=n("uor+"),o=n("Vl3Y"),s=n("5rEg"),p=n("2/Rp"),f=n("/MKj"),d=n("p+NB"),m=u.a.createElement,b=function(){var e=Object(f.b)(),t=Object(i.useState)(""),n=t[0],c=t[1],a=Object(f.c)(function(e){return e.post}),r=a.imagePaths,u=a.isAddingPost,l=a.postAdded,b=Object(i.useRef)();Object(i.useEffect)(function(){l&&c("")},[l]);var h=Object(i.useCallback)(function(t){if(t.preventDefault(),!n&&!n.trim())return alert("\uac8c\uc2dc\uae00\uc744 \uc791\uc131\ud558\uc138\uc694");var c=new FormData;r.forEach(function(e){c.append("image",e)}),c.append("content",n),e({type:d.e,data:c})},[n,r]),g=Object(i.useCallback)(function(e){c(e.target.value)},[]),v=Object(i.useCallback)(function(t){console.log(t.target.files);var n=new FormData;[].forEach.call(t.target.files,function(e){n.append("image",e)}),e({type:d.J,data:n})},[]),w=Object(i.useCallback)(function(){console.log("imageInput.current : ",b.current),b.current.click()},[b.current]),y=Object(i.useCallback)(function(t){return function(){e({type:d.y,index:t})}},[]);return m(o.a,{style:{margin:"10px 0 20px"},encType:"multipart/form-data",onSubmit:h},m(s.a.TextArea,{maxLength:140,placeholder:"\uc5b4\ub5a4 \uc2e0\uae30\ud55c \uc77c\uc774 \uc788\uc5c8\ub098\uc694?",value:n,onChange:g}),m("div",null,m("input",{type:"file",multiple:!0,hidden:!0,ref:b,onChange:v}),m(p.a,{onClick:w}," \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"),m(p.a,{type:"primary",style:{float:"right"},htmlType:"submit",isloading:u},"\uc0c9\uc0c9")),m("div",null,r.map(function(e,t){return m("div",{key:e,style:{display:"inline-block"}},m("img",{src:"http://localhost:3065/".concat(e),style:{width:"200px"},alt:e}),m("div",null,m(p.a,{onClick:y(t)},"\uc81c\uac70")))})))},h=u.a.createElement,g=function(){var e=Object(f.b)(),t=Object(f.c)(function(e){return e.user}).me,n=Object(f.c)(function(e){return e.post}),c=n.mainPosts,a=n.hasMorePost,r=Object(i.useRef)([]),u=Object(i.useCallback)(function(){if(window.scrollY+document.documentElement.clientHeight>document.documentElement.scrollHeight-300&&a){var t=c[c.length-1].id;r.current.includes(t)||e({type:d.q,lastId:t}),r.current.push(t)}},[a,c.length]);return Object(i.useEffect)(function(){return window.addEventListener("scroll",u),function(){window.removeEventListener("scroll",u)}},[c.length]),h("div",null,t&&h(b,null),c.map(function(e){return h(l.a,{key:e.id,post:e})}))};g.getInitialProps=function(){var e=Object(r.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.store.dispatch({type:d.q});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();t.default=g},vlRD:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){var e=n("RNiq");return{page:e.default||e}}])}},[["vlRD",1,0]]]);